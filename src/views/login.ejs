<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<!--  Google OAuth  -->
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <!--    BootStrap Library-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Dongle:wght@700&family=Jua&family=Noto+Serif+KR:wght@200&display=Gowun+Dodum&display=swap"
          rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!--    Js -->
    <script><%- include('js/order-layout.js') %></script>
    <script><%- include('js/main-header.js') %></script>
    <title>Document</title>
</head>

<body>
<%- include('main-header.ejs') %>
<div class="container-fluid" style="width:45%; background: white; margin-top: 75px; margin-bottom: 40px; min-height:1000px; padding: 0">
    <section class="bg-light">
        <div class="container py-4">
            <div class="row align-items-center justify-content-between">
                <a class="navbar-brand h1 text-center">
                    <span class="text-dark h4">냐옹</span> <span class="text-primary h4">상회</span>
                </a>
            </div>
            <form>
                <div class="form-group">
                    <label for="id" class="form-label mt-4" >아이디</label>
                    <input type="text" class="form-control" id="id" aria-describedby="emailHelp">
                </div>
                <div class="form-group">
                    <label class="form-label mt-4" for="password">비밀번호</label>
                    <input type="password" class="form-control" id="password">
                    <div class="valid-feedback"></div>
                </div>

                <div class="d-grid gap-2">
                    <div class="btn btn-primary btn-lg" onclick="login()">로그인</div>
                    아직 냐옹상회의 회원이 아니신가요?
                    <a class="btn btn-primary btn-lg" href="view/signup"> 가입하러 가기</a>
                    <a id="buttonDiv" class="btn btn-primary btn-lg" href="/google"> 구글 로그인</a>
                </div>

            </form>
        </div>
    </section>
</div>

</div>

</body>

<script>
  const loginBtn = document.getElementById('login');

  function login() {
    const email = document.getElementById('id').value;
    const password = document.getElementById('password').value;
    axios
      .post('http://localhost:3000/auth/login',
        { email: email, password: password }
      )
      .then((res) => {
        // 응답처리
        alert("로그인에 성공하였습니다.")
        window.location.replace("http://localhost:3000/orders/index")
      })
      .catch((error) => {
        // 예외처리
        alert(error.response?.data?.message || error.response.data.errorMessage.details[0].message);
      });
  }
  function signup(){
    window.location.replace("http://localhost:3000/orders/signup")
  }
  function logout(){
    axios
      .post('http://localhost:3000/auth/logout',
      )
      .then((res) => {
        // 응답처리
        alert("정상적으로 로그아웃 처리 되었습니다.")
        window.location.href = "localhost:3000/view"

      })
      .catch((error) => {
        // 예외처리
        alert(error.response?.data?.message || error.response.data.errorMessage.details[0].message);
      });
  }



</script>
<!--하단 메뉴바-->
<%- include('main-footer.ejs') %>
</html>