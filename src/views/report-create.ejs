<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>신고</title>

    <!--    BootStrap Library-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link
        href="https://fonts.googleapis.com/css2?family=Dongle:wght@700&family=Jua&family=Noto+Serif+KR:wght@200&display=Gowun+Dodum&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <!--    JQuery-->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!--    &lt;!&ndash;    JQuery Cookie&ndash;&gt;-->
    <!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>-->
  
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container-fluid" style="background:#eee; margin-top: 40px; margin-bottom: 40px;">
        <div class="container" style="background: #fff; margin-top: 20px;padding: 0;">
    
            <div class="container-fluid" style=" margin-top: 20px;" >
                <div class="row">
                  <div class="col-md-2" id="image-container"></div> 
                  <div class="col-md-8" style="border: 3px dotted #5cd7f2; border-radius: 3px; padding-left: 15%; padding-bottom: 7%; padding-top: 2%;">
                      <h3>피신고인:</h3> 
                      <h3><input type="text" style="width: 80%" id="reported" placeholder="상대방의 email을 정확히 입력해주세요."></h3>
                      <h3>제목:</h3> 
                      <h3><input type="text" style="width: 80%" id="title"></h3>
                      <h3>내용:</h3> 
                      <h3><textarea style="width: 80%; height: 300px"  id="description"></textarea></h3>
                      <br>
                      <button onclick="report()">신고하기</button>
    
    
                    </div>  
                </div>  
            </div>   
    
        </div>  
      </div>
</body>
<script>
    function report(){
        
    const reported = document.getElementById('reported').value;
    const title = document.getElementById('title').value;
    const description = document.getElementById('description').value;
    axios
        .post('http://localhost:3000/report',
            {
            reported: reported,
            title: title,
            description: description
            }
        )
        .then((res) => {
            // 응답처리
            alert(JSON.stringify(res.data))
            window.location.replace("http://localhost:3000/report")
        })
        .catch((error) => {
          if (error.response.status === 401) {
                    alert('로그인하셔야 합니다.');
                    window.location.href = '/admin/login'
                }
            else{alert(error.response?.data?.message || error.response.data.errorMessage.details[0].message);}
        });
    }

</script>
</html>